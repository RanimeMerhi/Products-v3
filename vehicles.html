<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vehicles</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
    <link rel="stylesheet" href="style.css" />
    <link rel="icon" href="./tab_icon.png">
</head>

<body>
    <!-- TOP BAR -->
    <header class="topbar">
        <div class="topbar-inner">
            <a id="language-link" href="https://forms.gle/tT3DcJkTFx4ny3wf8" class="bp-pill">
                <i class="fa-solid fa-briefcase"></i>
                <span id="business-package-text">Business Packages</span>
            </a>

            <div class="brand-center">
                <a href="home.html" aria-label="Home">
                    <img src="./Without Background/olx.png" alt="OLX" />
                </a>
            </div>

            <div class="lang-wrap dropdown">
                <button class="lang-mini dropdown-toggle" type="button" id="langDropdown" data-bs-toggle="dropdown"
                    aria-expanded="false">
                    <span class="lang-mini-main">
                        <i class="fa-solid fa-globe"></i>
                        <span class="lang-mini-text">LANG</span>
                    </span>
                </button>

                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="langDropdown">
                    <li><button class="dropdown-item" id="en-button" type="button">English</button></li>
                    <li><button class="dropdown-item" id="ar-button" type="button">العربية</button></li>
                </ul>
            </div>
        </div>
    </header>

    <!-- CATEGORY NAV -->
    <nav class="cat-nav">
        <div class="cat-nav-inner">
            <a href="vehicles.html">Vehicles</a>
            <a href="properties.html">Properties</a>
            <a href="mobile_and_accessories.html">Mobiles & Accessories</a>
            <a href="Electronics_Home_Appliances.html">Electronics & Appliances</a>
            <a href="furniture_and_decor.html">Furniture & Decor</a>
            <a href="business_and_industrial.html">Business & Industrial</a>
            <a href="pets.html">Pets</a>
            <a href="jobs.html">Jobs</a>
            <a href="fashion_beauty.html">Fashion & Beauty</a>
            <a href="kids_babies.html">Kids & babies</a>
            <a href="sports.html">Sports & Equipment</a>
            <a href="hobbies.html">Hobbies</a>
            <a href="services.html">Services</a>
        </div>
    </nav>

    <!-- MAIN -->
    <main class="page">
        <div class="page-shell">
            <div class="hero">
                <img src="./Without Background/Background=No Background, Category=Vehicles.png" alt="Vehicles" />
                <h1 class="hero-title" id="page-title">Vehicles</h1>
            </div>

            <div class="subcats" id="category-container">
                <!-- loaded dynamically -->
            </div>
        </div>
    </main>

    <!-- FOOTER -->
    <footer class="footer">
        <div class="footer-inner">
            <div class="follow">
                <span class="follow-label">Follow Us</span>
                <div class="social">
                    <a href="https://www.instagram.com/olxlebanon/" target="_blank" aria-label="Instagram"><i
                            class="fa-brands fa-instagram"></i></a>
                    <a href="https://www.facebook.com/olxlebanon" target="_blank" aria-label="Facebook"><i
                            class="fa-brands fa-facebook-f"></i></a>
                    <a href="https://www.youtube.com/channel/UCPg0SSnmnUeq8rmJpaKjAtg" target="_blank"
                        aria-label="YouTube"><i class="fa-brands fa-youtube"></i></a>
                </div>
            </div>

            <a class="contact-pill" href="https://help.olx.com.lb/hc/en-us/requests/new" target="_blank" rel="noopener">
                <i class="fa-brands fa-whatsapp"></i>
                <span id="contact-text">Contact Us</span>
            </a>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            let currentLanguage = 'en';

            const enButton = document.getElementById('en-button');
            const arButton = document.getElementById('ar-button');
            const categoryContainer = document.getElementById('category-container');

            const urlParams = new URLSearchParams(window.location.search);
            const langFromUrl = urlParams.get('lang');

            function switchLanguage(language) {
                currentLanguage = language;
                localStorage.setItem('selectedLanguage', language);

                // RTL handling
                if (language === 'ar') {
                    document.documentElement.lang = 'ar';
                    document.documentElement.dir = 'rtl';
                    document.body.classList.add('rtl');
                } else {
                    document.documentElement.lang = 'en';
                    document.documentElement.dir = 'ltr';
                    document.body.classList.remove('rtl');
                }

                updateTexts();
                updateBusinessPackageText();
                updateLink(language);
                loadCategories();
            }

            function updateTexts() {
                const pageTitle = document.getElementById('page-title');
                const contactText = document.getElementById('contact-text');
                if (pageTitle) pageTitle.textContent = currentLanguage === 'en' ? 'Vehicles' : 'مركبات';
                if (contactText) contactText.textContent = currentLanguage === 'en' ? 'Contact Us' : 'تواصل معنا';
            }

            async function loadCategories() {
                try {
                    const response = await fetch('VAS-SHEET.json');
                    const data = await response.json();
                    const filteredData = data.filter(item => item.l1 === 'Vehicles');

                    filteredData.sort((a, b) => a.priority_for_l2 - b.priority_for_l2);

                    categoryContainer.innerHTML = '';
                    const addedTitles = new Set();

                    const categoryLinks = {
                        "Motorcycles & ATVs": "Motorcycles_and_ATVs.html",
                        "Cars for Rent": "cars_for_rent.html",
                        "Boats": "boats.html",
                        "Trucks & Buses": "Trucks_and_Buses.html",
                        "All Vehicles Spare Parts": "all_vehicles_spare_parts.html",
                        "Cars for Sale": "cars_for_sale.html",
                        "All Vehicles Accessories": "all_vehicles_accessories.html",
                        "Number Plates": "number_plates.html"
                    };

                    filteredData.forEach(item => {
                        const categoryName = currentLanguage === 'en' ? item.cat_english_name : item.cat_arabic_name;

                        if (!addedTitles.has(categoryName)) {
                            addedTitles.add(categoryName);

                            const categoryLink = categoryLinks[item.cat_english_name] || '#';

                            const a = document.createElement('a');
                            a.className = 'item';
                            a.href = `${categoryLink}?lang=${currentLanguage}`;
                            a.textContent = categoryName;

                            categoryContainer.appendChild(a);
                        }
                    });
                } catch (error) {
                    console.error('Error loading categories:', error);
                }
            }

            function updateBusinessPackageText() {
                const businessPackageText = document.getElementById('business-package-text');
                if (businessPackageText) {
                    businessPackageText.innerText = currentLanguage === 'en' ? 'Business Packages' : 'شراء الباقة المختصة';
                }
            }

            function updateLink(language) {
                const linkElement = document.getElementById('language-link');
                if (!linkElement) return;

                const links = {
                    'en': 'https://forms.gle/tT3DcJkTFx4ny3wf8',
                    'ar': 'https://forms.gle/oHamKPJtFMvfaQui9'
                };
                linkElement.href = links[language] || links.en;
            }

            enButton.addEventListener('click', () => switchLanguage('en'));
            arButton.addEventListener('click', () => switchLanguage('ar'));

            const savedLanguage = localStorage.getItem('selectedLanguage') || 'en';
            switchLanguage(langFromUrl || savedLanguage);
        });
    </script>
</body>

</html>